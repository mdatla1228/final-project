<div>
  <div>
    <h1>
    <%= @the_country.name %> 
    </h1>
      <% if @current_user != nil %>
    <% current_user_bookmarks = Bookmark.where ({ :country_id => @the_country.id, :user_id => session.fetch(:user_id)}) %>

    <% the_bookmark = current_user_bookmarks.at(0) %>

    <% if the_bookmark == nil %>
      <form action="/insert_bookmark" method="post">

      <input type="hidden" name="query_user_id" value="<%= session.fetch(:user_id) %>">

      <input type="hidden" name="query_country_id" value="<%= @the_country.id %> ">

      <button>Bookmark this Country!</button>
    </form>

    <% else %>
      <a href="/delete_bookmark/<%= the_bookmark.id %>">Un-bookmark</a>

    <% end %>
    <% end %>

    <div>
      <div>
        <a href="/countries">
          Go back
        </a>
      </div>

      <div>
        <a href="/delete_country/<%= @the_country.id %>">
          Delete country
        </a>
      </div>
    </div>

    <dl>
      <dt>
        Name
      </dt>
      <dd>
        <%= @the_country.name %>
      </dd>

      <dt>
        Body
      </dt>
      <dd>
        <%= @the_country.body %>
      </dd>

  
    </dl>
  </div>
</div>

<hr>


<div>
  <div>
    <h2>
      Edit country
    </h2>

    <form action="/modify_country/<%= @the_country.id %>"  method="post" >
      <div>
        <label for="name_box">
          Name
        </label>

        <input type="text" id="name_box" name="query_name" value="<%= @the_country.name %>">
      </div>

      <div>
        <label for="body_box">
          Body
        </label>

        <input type="text" id="body_box" name="query_body" value="<%= @the_country.body %>">
      </div>

      <button>
        Update country
      </button>
    </form>
  </div>
</div>

<hr>

<h2>Cities</h2>

<table border="1">
  <tr>
    <th>
      City
    </th>

    <th>
      Description
    </th>

     <th>
      Details
    </th>
  </tr>

  <% @the_country.cities.each do |a_city| %>
    <tr>
      <td>
        <%= a_city.name %>
      </td>

      <td>
        <%= a_city.body %>
      </td>

     
      <td>
        <a href="/cities/<%= a_city.id %>">
          Show details
        </a>
      </td>
    </tr>
  <% end %>
</table>
